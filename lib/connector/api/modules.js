"use strict";function create(a,b){utils.ajax("http://"+base.getServerDomainName()+"/modules"+utils.querify(a),function(a,c){switch(c){case 200:return console.log("registration succeeded:",a),void(b&&b(null,new base.Module(a)));case 400:console.log("invalid data:",a);break;case 403:console.log("access denied");break;default:console.log("server error:",a)}b&&b("undefined"==typeof a?{}:a,null)},"json","post")}function createPath(a,b,c){return"/"+a+(b?"/"+b:"")+(c?"/"+c:"/latest")}function findDescendant(a,b){utils.ajax("http://"+base.getServerDomainName()+"/modules/"+a+utils.querify({find:"descendant",format:"json"}),function(a,c){b(404===c||null===a?null:new base.Module(a))},"json")}function readByName(a,b,c){utils.ajax("http://"+base.getServerDomainName()+"/modules/"+a+(b?"/"+b:"")+utils.querify({format:"json"}),function(a,b){c(404===b||null===a?null:new base.Module(a))},"json")}function list(a,b){var c=_.extend({format:"json",withoutOriginalAuthors:!0},b);utils.ajax("http://"+base.getServerDomainName()+"/modules"+utils.querify(c),function(b){if(!b)return a(null,{});var c=b.list;delete b.list,a(_.map(c,function(a){return new base.Module(a)}),b)},"json")}function count(a,b){var c=_.extend({format:"json",count:"true"},b);utils.ajax("http://"+base.getServerDomainName()+"/modules"+utils.querify(c),function(b){return b?void a(b.count):a(0)},"json")}function listAuthors(a,b){utils.ajax("http://"+base.getServerDomainName()+"/users/for/modules/"+a,function(a,c){return 404!==c&&a?void(b&&b(_.map(a,function(a){return new base.User(a)}))):void(b&&b(null))},"json")}function listReferenceUrls(a,b){utils.ajax("http://"+base.getServerDomainName()+"/urls/for/modules/"+a,function(a,c){return 404!==c&&a?void(b&&b(_.map(a,function(a){return new base.ModuleUrl(a)}))):void(b&&b(null))},"json")}function addReferenceUrls(a,b,c,d){utils.ajax("http://"+base.getServerDomainName()+"/urls/for/modules/"+a+utils.querify({_csrf:c,urls:JSON.stringify(b)}),function(a,b){return 404!==b&&a?void(d&&d(_.map(a,function(a){return new base.ModuleUrl(a)}))):void(d&&d(null))},"json","post")}function deleteUrl(a,b,c){utils.ajax("http://"+base.getServerDomainName()+"/urls/delete"+utils.querify({_csrf:b,urlId:a}),function(a,b){c&&c(404===b||200===b&&a)},"json","post")}function listForProject(a,b){utils.ajax("http://"+base.getServerDomainName()+"/modules/for/"+a,function(a,c){return 404===c||null===a?b(null):void b(_.map(a,function(a){return new base.Module(a)}))},"json")}var _=require("underscore"),base=require("../models/base"),utils=require("../utils");exports.create=create,exports.findDescendant=findDescendant,exports.readByName=readByName,exports.list=list,exports.count=count,exports.listAuthors=listAuthors,exports.listReferenceUrls=listReferenceUrls,exports.addReferenceUrls=addReferenceUrls,exports.deleteUrl=deleteUrl,exports.listForProject=listForProject;/*! f3js-cli - v0.0.3 - 2016-06-23 */
