"use strict";function init(a){void 0===a&&(a=null),program.version(require("../package.json").version).option("-t, --token [access token]","f3js.org access token").option("-s, --server [domain name]","f3js.org server").option("-p, --platform [platform path]","path to the target platform").option("-j, --json","output everything as a JSON object").option("-v, --verbose","enable verbose output").option("-C, --clear","clear configurations"),a&&a(program),program.parse(process.argv);var b=!!program.verbose,c=!!program.clear;"undefined"==typeof self&&(global.self={}),global.self.debug=!!b,b&&console.log("use verbose mode");var d=require("home-config").load(".f3js-cli");c&&(d.token&&delete d.token,d.server&&delete d.server,d.platform&&delete d.platform);var e=/^(((([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9\-]*[a-zA-Z0-9])\.)*([A-Za-z0-9]|[A-Za-z0-9][A-Za-z0-9\-]*[A-Za-z0-9]))|((25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)(\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}))(:[0-9]{1,4}|[1-5][0-9]{4}|6[0-4][0-9]{3}|65[0-4][0-9]{2}|655[0-2][0-9]|6553[0-5])?$/;if(d.server&&e.test(d.server)&&models.setServerDomainName(d.server),program.server&&e.test(program.server)&&models.setServerDomainName(program.server),d.server=models.getServerDomainName(),b&&console.log("use server:",models.getServerDomainName()),program.token?(utils.setToken(program.token),d.token=program.token,b&&console.log("use access token:","*")):d.token&&(utils.setToken(d.token),b&&console.log("use access token:","*")),program.platform?d.platform=program.platform:d.platform&&(program.platform=d.platform),"string"==typeof program.platform){var f=program.platform;0===f.indexOf("edison://")?program.platform=parseDestination(f.substring("edison://".length)):program.platform=null,b&&program.platform&&console.log("use platform:",program.platform.type)}return d.save(),program}function parseDestination(a){var b,c={type:"edison",username:"root",host:"192.168.2.15",port:22,path:".node_app_slot",password:"",privateKey:void 0};return b=/^([a-z_][a-z0-9_]{0,30})(:.*)?@(.+)$/.exec(a),b&&(c.username=b[1],a=b[b.length-1]),b&&b.length>2&&(c.password=b[2].substring(1)),b=/^(.+):(.+)$/.exec(a),b?(c.host=b[1],a=b[2]):(c.host=a,a=""),b=/^([0-9]]+):(.+)$/.exec(a),b&&(c.port=parseInt(b[1]),a=b[2]),a&&a.length>0&&(c.path=a),c}var program=require("commander"),models=require("./connector/models"),utils=require("./connector/utils");exports.init=init;/*! f3js-cli - v0.1.2 - 2016-07-10 */
